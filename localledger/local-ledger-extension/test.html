<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Popup Test Page</title>
</head>
<body>
    <h1>Testing Popup Functionality</h1>

    <!-- Input for Amazon Product Link -->
    <input type="text" id="amazonInput" placeholder="Enter Amazon Product Link">
    <button id="searchButton">Search Product</button>

    <!-- Area to display search results -->
    <div id="searchResults">Results will appear here...</div>

    <script src="popup.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const searchButton = document.getElementById('searchButton');
            const amazonInput = document.getElementById('amazonInput');
            const resultsDiv = document.getElementById('searchResults');

            searchButton.addEventListener('click', function() {
                const productLink = amazonInput.value.trim();
                if (productLink) {
                    fetchProductDetails(productLink);
                } else {
                    resultsDiv.innerHTML = "Please enter a valid Amazon product link.";
                }
            });

            // Function to simulate fetching data from an API
            function fetchProductDetails(productURL) {
                resultsDiv.innerHTML = "Loading product details...";
                // Simulated fetch call
                fetch('https://api.example.com/products', {
                    method: 'POST', // GET if applicable
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ url: productURL })
                })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    displayResults(data);
                })
                .catch(error => {
                    console.error('Error fetching product details:', error);
                    resultsDiv.innerHTML = "Failed to load product details.";
                });
            }

            function displayResults(data) {
                // Update the display area with API data
                resultsDiv.innerHTML = `Product Name: ${data.name}<br>Description: ${data.description}<br>`;
            }
        });
    </script>
</body>
</html>
